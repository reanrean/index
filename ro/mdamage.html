<!DOCTYPE HTML>
<html lang="zh">
<head>
<meta name="viewport" content="initial-scale=1">
<meta charset="UTF-8">
<link rel="icon" href="img/favicon.jpg" type="image/x-icon" />
<title>RO守護永恆的愛 - 隕石傷害计算</title>
<style>
.mode2 {display:none;}
a {color:DodgerBlue; text-decoration: none;}
</style>
<script type='text/javascript' charset="UTF-8">
//https://forum.gamer.com.tw/C.php?bsn=28924&snA=17536
//傷害加成=魔傷加成*火傷加成*範圍傷加成*最終傷害加成*種族傷加成
//((INT*2+INT*INT/100+裝備MATK+(INT+裝備MATK)*魔攻加成)*(1000+MDEF*(1-忽視魔防))/(1000+10*MDEF*(1-忽視魔防))*(1+魔法穿刺)+精煉MATK)*屬性修正*技能倍率*傷害加成
window.onload = function(){
	init0 = ['nInt','nMatk','nNakeMatk','nFullMatk','nMatk2','pMatk','pMdam','pFire','pRange','pFinal','nMdef','pRace','pBreak','pPene'];
	init100 = ['pAttr'];
	for (var i in init0) setVal(init0[i],0);
	for (var i in init100) setVal(init100[i],100);
}
function calc(){
	var arrInput = init0.concat(init100);
	for (var i in arrInput) {
		if (arrInput[i].substring(0,1)=='p') eval("var " + arrInput[i] + " = getVal('" + arrInput[i] + "')/100;");
		else eval("var " + arrInput[i] + " = getVal('" + arrInput[i] + "');");
	}
	var result = ((nInt*2+nInt*nInt/100+nMatk+(nInt+nMatk)*pMatk)*(1000+nMdef*(1-Math.max(0,pBreak)))/(1000+10*nMdef*(1-Math.max(0,pBreak)))*(1+pPene)+nMatk2)*6.8*pAttr*(1+pMdam)*(1+pFire)*(1+pRange)*(1+pFinal)*(1+pRace);
	document.getElementById('output').innerHTML = result;
}
function display(id){
	var arr = document.getElementsByClassName(id);
	for (var i = 0; i<arr.length; i++) arr[i].style.display = "table-row";
}
function hide(id){
	var arr = document.getElementsByClassName(id);
	for (var i = 0; i<arr.length; i++) arr[i].style.display = "none";
}
function getVal(id){
	return noNaN(parseInt(document.getElementById(id).value));
}
function setVal(id,val){
	document.getElementById(id).value=val;
}
function noNaN(n) {
	return isNaN(n) ? 0 : n;
}
</script>
</head>
<body>
<table>
<tr><td>智力總和</td><td><input type="text" id="nInt" class="cal"></td></tr>
<tr class="mode1"><td>裝備魔攻</td><td><input type="text" id="nMatk" class="cal"> <a href="#" onclick="display('mode2');hide('mode1');return false;">&lt;用面板魔攻計算&gt;</a></td></tr>
<tr class="mode2"><td>裸裝魔攻</td><td><input type="text" id="nNakeMatk" class="cal"> <a href="#" onclick="display('mode1');hide('mode2');return false;">&lt;用裝備魔攻計算&gt;</a></td></tr>
<tr class="mode2"><td>面板魔攻</td><td><input type="text" id="nFullMatk" class="cal"></td></tr>
<tr><td>精煉魔攻</td><td><input type="text" id="nMatk2" class="cal"></td></tr>
<tr><td>魔攻加成%</td><td><input type="text" id="pMatk" class="cal"></td></tr>
<tr><td>魔傷加成%</td><td><input type="text" id="pMdam" class="cal"></td></tr>
<tr><td>火傷加成%</td><td><input type="text" id="pFire" class="cal"></td></tr>
<tr><td>範圍傷加成%</td><td><input type="text" id="pRange" class="cal"></td></tr>
<tr><td>最終傷害加成%</td><td><input type="text" id="pFinal" class="cal"></td></tr>
<tr><td>無視魔防%</td><td><input type="text" id="pBreak" class="cal"></td></tr>
<tr><td>魔法穿刺%</td><td><input type="text" id="pPene" class="cal"></td></tr>
<tr><td colspan="2">-</td>
<tr><td>怪物MDEF</td><td><input type="text" id="nMdef" class="cal"></td></tr>
<tr><td>屬性修正%</td><td><input type="text" id="pAttr" class="cal"></td></tr>
<tr><td>種族傷害加成%</td><td><input type="text" id="pRace" class="cal"></td></tr>
<tr><td colspan="2"><button onclick="calc()">計算</button></td>
</table>
<p id="output"></p>
</body>
</html>
