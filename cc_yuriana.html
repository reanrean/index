<!DOCTYPE HTML>
<html lang="zh">
<head>
<title></title>
<script type="text/javascript"> 
function noNaN( n ) { return isNaN( n ) ? 0 : n; }
function calculate(){
	var himawari=parseInt(document.getElementById('himawari').value);
	if(himawari==0){var himawari1=0;}
	else if(himawari==1){var himawari1=2.1;}
	else if(himawari==2){var himawari1=2.3;}
	else if(himawari==3){var himawari1=2.5;}
	else if(himawari==4){var himawari1=2.7;}
	else {var himawari1=3;}
	//=IF(B3=0,0,IF(B3=1,2.1,IF(B3=2,2.3,IF(B3=3,2.5,IF(B3=4,2.7,3)))))
	
	var yuriana=parseInt(document.getElementById('yuriana').value);
	if(yuriana==0){var yuriana1=0;}
	else if(yuriana==1){var yuriana1=2.1;}
	else if(yuriana==2){var yuriana1=2.3;}
	else if(yuriana==3){var yuriana1=2.5;}
	else if(yuriana==4){var yuriana1=2.7;}
	else {var yuriana1=3;}
	
	var lily=parseInt(document.getElementById('lily').value);
	if(lily==0){var lily1=0;}
	else if(lily==1){var lily1=0.1;}
	else if(lily==2){var lily1=0.3;}
	else if(lily==3){var lily1=0.5;}
	else if(lily==4){var lily1=0.7;}
	else {var lily1=1;}
	//=IF(B5=0,0,IF(B5=1,0.1,IF(B5=2,0.3,IF(B5=3,0.5,IF(B5=4,0.7,1)))))
	
	var friend=parseInt(document.getElementById('friend').value);
	var friend1=2*friend;
	
	if(friend==1&&document.getElementById("lily_weapon").value=="7")
	{document.getElementById("lily_weapon").value="6";}
	
	var lily_weapon=parseInt(document.getElementById('lily_weapon').value);
	var lily_weapon1=0.5*lily_weapon;
	
	var final1=1+yuriana1+himawari1+lily_weapon1+lily1+friend1;
	document.getElementById('final').value = final1.toFixed(2);
	
	var nolily1=1+yuriana1+himawari1+friend1+0.1;
	
	var ring=Math.max(0,lily-1)*20+Math.min(240,lily_weapon*40);
	document.getElementById('ring').value = ring;
	
	//var comp1=final1/(1+yuriana1+himawari1+friend1);
	//document.getElementById('comp1').value = comp1.toFixed(4);
	var comp2=final1/nolily1;
	document.getElementById('comp2').value = comp2.toFixed(4);
	
	var aim=noNaN(parseInt(document.getElementById('aim').value));
	var per=noNaN(parseInt(document.getElementById('per').value));
	var ap=noNaN(parseInt(document.getElementById('ap').value));
	var maxap=noNaN(parseInt(document.getElementById('maxap').value));
	
	var senkou1=per*final1;
	var senkou2=per*nolily1;
	var times1=Math.ceil(aim*10000/senkou1,1);
	var times2=Math.ceil(aim*10000/senkou2,1);
	var needap1=times1*ap;
	var needap2=times2*ap;
	var need_fruit1=Math.ceil(needap1/maxap,1);
	var need_fruit2=Math.ceil(needap2/maxap,1);
	var fruit=need_fruit2-need_fruit1;
	
	document.getElementById('times1').value = times1;
	document.getElementById('times2').value = times2;
	document.getElementById('needap1').value = needap1;
	document.getElementById('needap2').value = needap2;
	document.getElementById('need_fruit1').value = need_fruit1;
	document.getElementById('need_fruit2').value = need_fruit2;
	document.getElementById('fruit').value = fruit;
}; 
window.onload = function(){ 
	document.getElementById('aim').value=400;
	document.getElementById('per').value=10000;
	document.getElementById('ap').value=30;
	document.getElementById('maxap').value=90;
	
	calculate();
}; 
</script> 
</head>

<body>
<p>
向日葵<select id="himawari" onchange=calculate()>
  <option value="0">沒有</option>
  <option value="1">0破</option>
  <option value="2">1破</option>
  <option value="3">2破</option>
  <option value="4">3破</option>
  <option value="5">滿破</option>
  </select></br>
聖王女<select id="yuriana" onchange=calculate()>
  <option value="0">沒有</option>
  <option value="1">0破</option>
  <option value="2">1破</option>
  <option value="3">2破</option>
  <option value="4">3破</option>
  <option value="5">滿破</option>
  </select></br>
朋友<select id="friend" onchange=calculate()>
  <option value="1">有</option>
  <option value="0">沒有</option>
  </select></br>
白百合<select id="lily" onchange=calculate()>
  <option value="0">沒有</option>
  <option value="1">0破</option>
  <option value="2">1破</option>
  <option value="3">2破</option>
  <option value="4">3破</option>
  <option value="5">滿破</option>
  </select></br>
倍武<select id="lily_weapon" onchange=calculate()>
  <option value="0">沒有</option>
  <option value="1">1</option>
  <option value="2">2</option>
  <option value="3">3</option>
  <option value="4">4</option>
  <option value="5">5</option>
  <option value="6">6</option>
  <option value="7">7(朋友)</option>
  </select></br>
</p>
<p>
倍率：<output id="final"></output>　消耗戒指：<output id="ring"></output></br>
比0破白百合無武器效率：<output id="comp2"></output></br>
</p>
<p>
假設：</br>
需刷戰功<input type="text" id="aim" onkeyup=calculate() />萬</br>
每場基本戰功<input type="text" id="per" onkeyup=calculate() /></br>
每場ap<input type="text" id="ap" onkeyup=calculate() /></br>
最大ap<input type="text" id="maxap" onkeyup=calculate() /></br>
打<output id="times1"></output>場可畢業，需要ap：<output id="needap1"></output>，果：<output id="need_fruit1"></output></br>
0破白百合無武器打<output id="times2"></output>場可畢業，需要ap：<output id="needap2"></output>，果：<output id="need_fruit2"></output></br>
比0破白百合無武器少消耗<output id="fruit"></output>果</br>
</p>
</body>
